@model LMS.Models.Course

@{
    int courseId = ViewBag.CourseId ?? Model.Id;
    string userRole = Session["Role"] as string ?? "";
}

@if (userRole == "Student")
{
    <!-- Student Course Header -->
    <div class="student-course-header mt-3">
        <div class="course-header-left">
            <div class="course-icon">
                <span>@Model.CourseCode.Substring(0, 1)</span>
            </div>
            <div class="course-info-section">
                <h1 class="course-name">@Model.CourseTitle</h1>
                <div class="course-meta">
                    <span class="course-code-meta">@Model.CourseCode</span>
                    @if (ViewBag.SectionName != null)
                    {
                        <span class="meta-separator">|</span>
                        <span class="course-section">@ViewBag.SectionName</span>
                    }
                    @if (ViewBag.Semester != null)
                    {
                        int semester = ViewBag.Semester;
                        string semesterName = semester == 1 ? "1st Semester" : semester == 2 ? "2nd Semester" : semester == 3 ? "Summer" : "Semester " + semester;
                        <span class="meta-separator">|</span>
                        <span class="course-schedule-meta">@semesterName</span>
                    }
                    @if (ViewBag.Day == null && ViewBag.TimeFrom == null && ViewBag.TimeTo == null)
                    {
                        <span class="meta-separator">|</span>
                        <span class="course-schedule-meta">No schedule set</span>
                    }
                    else
                    {
                        <span class="meta-separator">|</span>
                        <span class="course-schedule-meta">
                            @if (ViewBag.Day != null)
                            {
                                @ViewBag.Day
                            }
                            @if (ViewBag.TimeFrom != null && ViewBag.TimeTo != null)
                            {
                                DateTime timeFrom = ViewBag.TimeFrom;
                                DateTime timeTo = ViewBag.TimeTo;

                                if (ViewBag.Day != null)
                                {
                                    <text>, </text>
                                }

                                @($"{timeFrom:hh:mm tt} - {timeTo:hh:mm tt}")
                            }
                        </span>
                    }
                </div>
            </div>
        </div>
        <div class="course-header-right">
            @if (ViewBag.TeacherName != null)
            {
                <div class="teacher-info">
                    <div class="teacher-name">@ViewBag.TeacherName</div>
                    <div class="teacher-role">Professor</div>
                </div>
            }
        </div>
    </div>
}
else
{
    <!-- Teacher Course Header (Original) -->
    <div class="page-header">
        <div class="course-title-section">
            <h1>@Model.CourseTitle</h1>
            <span class="course-schedule">
                @Model.CourseCode
                @if (ViewBag.SectionName != null)
                {
                    <text> • @ViewBag.SectionName</text>
                }
                @if (ViewBag.Semester != null)
                {
                    int semester = ViewBag.Semester;
                    string semesterName = semester == 1 ? "1st Semester" : semester == 2 ? "2nd Semester" : semester == 3 ? "Summer" : "Semester " + semester;
                    <text> • @semesterName</text>
                }
            </span>
        </div>
    </div>
}

<style>
    /* Student Course Header Styles */
.student-course-header {
    background: white;
    border: 1px solid #e0e0e0;
    border-radius: 12px;
    padding: 1.5rem 2rem;
    margin-bottom: 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    flex-wrap: wrap; /* NEW: Prevents overflow */
}

.course-header-left {
    display: flex;
    align-items: center;
    gap: 1.25rem;
    flex: 1 1 100%; /* NEW: Forces left content to wrap properly */
}

.course-icon {
    width: 56px;
    height: 56px;
    background: var(--dark-primary-color);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.5rem;
    font-weight: 700;
    flex-shrink: 0;
    font-family: var(--archivo-black-font);
}

.course-info-section {
    flex: 1;
}

.course-name {
    font-size: 1.4rem;
    font-weight: 600;
    color: var(--dark-primary-color);
    margin: 0 0 0.4rem 0;
    font-family: var(--archivo-plain-font);
}

.course-meta {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: wrap;
    font-size: 0.85rem;
    color: #666;
}

.meta-separator {
    color: #ccc;
}

.course-header-right {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    flex: 1 1 100%; /* NEW */
    justify-content: flex-end;
    margin-top: 1rem;
}

.teacher-info {
    text-align: right;
}

.teacher-name {
    font-size: 1rem;
    font-weight: 600;
    color: var(--primary-color);
    margin-bottom: 0.2rem;
}

.teacher-role {
    font-size: 0.8rem;
    color: #666;
}

/* Responsive */
@@media (max-width: 968px) {
    .student-course-header {
        flex-direction: column;
        align-items: flex-start;
        margin-bottom: 0;

    }

    .course-header-right {
        width: 100%;
        justify-content: space-between;
    }

    .teacher-info {
        text-align: left;
    }
}

@@media (max-width: 576px) {
    .student-course-header {
        padding: 1.25rem;
    }

    .course-header-left {
        flex-direction: row;
        align-items: flex-start;
        gap: 1rem;
    }

    .course-icon {
        width: 48px;
        height: 48px;
        font-size: 1.25rem;
    }

    .course-name {
        font-size: 1rem;
        width: 100%; /* NEW */
        word-break: break-word; /* Prevent overflow */
    }

    .course-meta {
        flex-direction: row;
        align-items: flex-start;
        gap: 0.25rem;
        font-size: 0.8rem;
    }

    .meta-separator {
        display: none;
    }

    .course-header-right {
        flex-direction: column;
        gap: 0.75rem;
        margin-top: 0.5rem;
        align-items: flex-start;
    }
}

</style>
