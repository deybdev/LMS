@{
    ViewBag.Title = "Sections";
}

<link rel="stylesheet" href="~/Content/manageUser.css" />
<link rel="stylesheet" href="~/Content/adminAcademic.css" />

<div class="admin-container">
    <div class="page-header">
        <h1>Section Management</h1>
        <p class="subtitle">Manage academic sections and class groups</p>
    </div>

    <!-- Create Section Button -->
    <div class="create-dropdown mb-3">
        <button type="button" data-bs-toggle="modal" data-bs-target="#createSectionModal">
            <i class="fa-solid fa-plus"></i> Create Section
        </button>
    </div>

    <!-- Navigation Tabs -->
    <div class="admin-navigation">
        <div class="nav-tabs">
            <button class="nav-tab"
                    onclick="window.location.href='@Url.Action("Departments", "Admin")'">
                Department
            </button>
            <button class="nav-tab"
                    onclick="window.location.href='@Url.Action("Programs", "Admin")'">
                Program
            </button>
            <button class="nav-tab active"
                    onclick="window.location.href='@Url.Action("Sections", "Admin")'">
                Sections
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="admin-content">
        <!-- Search and Filter Section -->
        <div class="search-filter-section">
            <div class="filter-controls">
                <input type="text" id="searchInput" class="search-input" placeholder="Search sections by name, program, or year level..." />

                <div class="filter-dropdowns">
                    <select class="filter-select" id="programFilter">
                        <option value="">All Programs</option>
                        <option value="BSCS">BS in Computer Science</option>
                        <option value="BSIT">BS in Information Technology</option>
                        <option value="BSBA">BS in Business Administration</option>
                        <option value="BSCE">BS in Civil Engineering</option>
                        <option value="BSA">BS in Accountancy</option>
                    </select>

                    <select class="filter-select" id="yearLevelFilter">
                        <option value="">All Year Levels</option>
                        <option value="1">1st Year</option>
                        <option value="2">2nd Year</option>
                        <option value="3">3rd Year</option>
                        <option value="4">4th Year</option>
                        <option value="5">5th Year</option>
                    </select>

                    <select class="filter-select" id="statusFilter">
                        <option value="">All Status</option>
                        <option value="Active">Active</option>
                        <option value="Inactive">Inactive</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Sections Table -->
        <div class="default-table-container">
            <table class="default-table">
                <thead>
                    <tr>
                        <th>Section Name</th>
                        <th>Program</th>
                        <th>Year Level</th>
                        <th>Students</th>
                        <th>Date Created</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="sectionTableBody">
                    <!-- Sample Data -->
                    <tr class="default-row" data-program="BSCS" data-year="1" data-status="Active">
                        <td class="default-info">
                            <div class="user-details">
                                <div class="user-name">BSCS 1-A</div>
                            </div>
                        </td>
                        <td><span class="role-tag">BSCS</span></td>
                        <td>1st Year</td>
                        <td>42</td>
                        <td class="last-login">
                            <div>08/15/2024</div>
                            <div class="login-time">09:00 AM</div>
                        </td>
                        <td class="action-buttons">
                            <button class="action-btn edit-btn" data-id="1" title="Edit">
                                <i class="fa-solid fa-pen"></i>
                            </button>
                            <button type="button" class="action-btn delete-btn"
                                    data-bs-toggle="modal"
                                    data-bs-target="#deleteModal"
                                    data-item-id="1"
                                    data-item-name="BSCS 1-A"
                                    data-target-remove=".default-row"
                                    title="Delete">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </td>
                    </tr>

                    <tr class="default-row" data-program="BSCS" data-year="1" data-status="Active">
                        <td class="default-info">
                            <div class="user-details">
                                <div class="user-name">BSCS 1-B</div>
                            </div>
                        </td>
                        <td><span class="role-tag">BSCS</span></td>
                        <td>1st Year</td>
                        <td>45</td>
                        <td class="last-login">
                            <div>08/15/2024</div>
                            <div class="login-time">09:05 AM</div>
                        </td>
                        <td class="action-buttons">
                            <button class="action-btn edit-btn" data-id="2" title="Edit">
                                <i class="fa-solid fa-pen"></i>
                            </button>
                            <button type="button" class="action-btn delete-btn"
                                    data-bs-toggle="modal"
                                    data-bs-target="#deleteModal"
                                    data-item-id="2"
                                    data-item-name="BSCS 1-B"
                                    data-target-remove=".default-row"
                                    title="Delete">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </td>
                    </tr>

                    <tr class="default-row" data-program="BSIT" data-year="2" data-status="Active">
                        <td class="default-info">
                            <div class="user-details">
                                <div class="user-name">BSIT 2-A</div>
                            </div>
                        </td>
                        <td><span class="role-tag">BSIT</span></td>
                        <td>2nd Year</td>
                        <td>38</td>
                        <td class="last-login">
                            <div>08/15/2024</div>
                            <div class="login-time">09:10 AM</div>
                        </td>
                        <td class="action-buttons">
                            <button class="action-btn edit-btn" data-id="3" title="Edit">
                                <i class="fa-solid fa-pen"></i>
                            </button>
                            <button type="button" class="action-btn delete-btn"
                                    data-bs-toggle="modal"
                                    data-bs-target="#deleteModal"
                                    data-item-id="3"
                                    data-item-name="BSIT 2-A"
                                    data-target-remove=".default-row"
                                    title="Delete">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </td>
                    </tr>

                    <tr class="default-row" data-program="BSBA" data-year="3" data-status="Active">
                        <td class="default-info">
                            <div class="user-details">
                                <div class="user-name">BSBA 3-A</div>
                            </div>
                        </td>
                        <td><span class="role-tag">BSBA</span></td>
                        <td>3rd Year</td>
                        <td>35</td>
                        <td class="last-login">
                            <div>08/15/2024</div>
                            <div class="login-time">09:15 AM</div>
                        </td>
                        <td class="action-buttons">
                            <button class="action-btn edit-btn" data-id="4" title="Edit">
                                <i class="fa-solid fa-pen"></i>
                            </button>
                            <button type="button" class="action-btn delete-btn"
                                    data-bs-toggle="modal"
                                    data-bs-target="#deleteModal"
                                    data-item-id="4"
                                    data-item-name="BSBA 3-A"
                                    data-target-remove=".default-row"
                                    title="Delete">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </td>
                    </tr>

                    <tr class="default-row" data-program="BSCE" data-year="4" data-status="Active">
                        <td class="default-info">
                            <div class="user-details">
                                <div class="user-name">BSCE 4-A</div>
                            </div>
                        </td>
                        <td><span class="role-tag">BSCE</span></td>
                        <td>4th Year</td>
                        <td>30</td>
                        <td class="last-login">
                            <div>08/15/2024</div>
                            <div class="login-time">09:20 AM</div>
                        </td>
                        <td class="action-buttons">
                            <button class="action-btn edit-btn" data-id="5" title="Edit">
                                <i class="fa-solid fa-pen"></i>
                            </button>
                            <button type="button" class="action-btn delete-btn"
                                    data-bs-toggle="modal"
                                    data-bs-target="#deleteModal"
                                    data-item-id="5"
                                    data-item-name="BSCE 4-A"
                                    data-target-remove=".default-row"
                                    title="Delete">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </td>
                    </tr>

                    <tr class="default-row" data-program="BSA" data-year="2" data-status="Inactive">
                        <td class="default-info">
                            <div class="user-details">
                                <div class="user-name">BSA 2-B</div>
                            </div>
                        </td>
                        <td><span class="role-tag">BSA</span></td>
                        <td>2nd Year</td>
                        <td>0</td>
                        <td class="last-login">
                            <div>08/15/2024</div>
                            <div class="login-time">09:25 AM</div>
                        </td>
                        <td class="action-buttons">
                            <button class="action-btn edit-btn" data-id="6" title="Edit">
                                <i class="fa-solid fa-pen"></i>
                            </button>
                            <button type="button" class="action-btn delete-btn"
                                    data-bs-toggle="modal"
                                    data-bs-target="#deleteModal"
                                    data-item-id="6"
                                    data-item-name="BSA 2-B"
                                    data-target-remove=".default-row"
                                    title="Delete">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Pagination Controls -->
        <div class="pagination-container">
            <div class="pagination-info">
                <span id="paginationInfo">Showing 1-6 of 6 entries</span>
                <span id="currentPageInfo" class="ms-3">Page 1 of 1</span>
            </div>
            <div class="pagination-controls">
                <button class="pagination-btn" id="prevBtn" disabled>
                    <i class="fa-solid fa-chevron-left"></i> Previous
                </button>
                <div class="pagination-numbers" id="paginationNumbers">
                    <button class="pagination-number active">1</button>
                </div>
                <button class="pagination-btn" id="nextBtn" disabled>
                    Next <i class="fa-solid fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<div id="alertContainer" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999; max-width: 320px;"></div>

<!-- Create/Edit Section Modal -->
<div class="modal fade" id="createSectionModal" tabindex="-1" aria-labelledby="createSectionModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createSectionModalLabel">
                    <i class="fa-solid fa-users"></i> <span id="modalTitle">Create New Section</span>
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">
                <div id="formErrorContainer" class="alert alert-danger alert-dismissible fade show d-none" role="alert">
                    <i class="fa-solid fa-circle-exclamation me-2"></i>
                    <span id="formErrorMessage"></span>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>

                <form id="createSectionForm">
                    @Html.AntiForgeryToken()

                    <input type="hidden" id="sectionId" name="id" />

                    <div class="mb-3">
                        <label for="sectionName" class="form-label">Section Name *</label>
                        <input type="text" id="sectionName" name="sectionName" class="form-control" required placeholder="e.g., A">
                    </div>

                    <div class="mb-3">
                        <label for="department" class="form-label">Department *</label>
                        <select id="department" name="department" class="form-select" required>
                            <option value="" disabled selected>Choose department</option>
                            <option value="CCS">CCS</option>
                            <option value="COE">COE</option>
                            <option value="COED">COED</option>
                            <option value="CBAA">CBAA</option>
                        </select>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="program" class="form-label">Program *</label>
                            <select id="program" name="program" class="form-select" required>
                                <option value="" disabled selected>Choose program</option>
                                <option value="BSCS">BS in Computer Science</option>
                                <option value="BSIT">BS in Information Technology</option>
                                <option value="BSBA">BS in Business Administration</option>
                                <option value="BSCE">BS in Civil Engineering</option>
                                <option value="BSA">BS in Accountancy</option>
                            </select>
                        </div>

                        <div class="col-md-6 mb-3">
                            <label for="yearLevel" class="form-label">Year Level *</label>
                            <select id="yearLevel" name="yearLevel" class="form-select" required>
                                <option value="" disabled selected>Choose year level</option>
                                <option value="1">1st Year</option>
                                <option value="2">2nd Year</option>
                                <option value="3">3rd Year</option>
                                <option value="4">4th Year</option>
                                <option value="5">5th Year</option>
                            </select>
                        </div>
                    </div>
                    


                </form>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn cancel-btn" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-primary" id="submitSectionBtn" form="createSectionForm">
                    <i id="sectionIcon" class="fa-solid fa-save me-1"></i> <span id="btnText">Create</span>
                </button>
            </div>
        </div>
    </div>
</div>

@section scripts {
    <script src="~/Scripts/Custom/deleteHandler.js"></script>

    @if (TempData["SuccessMessage"] != null)
    {
        <script>
            $(function () {
                showAlert('success', '@TempData["SuccessMessage"]');
            });
        </script>
    }

    @if (TempData["ErrorMessage"] != null)
    {
        <script>
            $(function () {
                showAlert('danger', '@TempData["ErrorMessage"]');
            });
        </script>
    }
}

